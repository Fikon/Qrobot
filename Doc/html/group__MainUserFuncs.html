<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>MusicRobot: Main user functions</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">MusicRobot
   &#160;<span id="projectnumber">1.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Main user functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MainUserFuncs.html#ga291a43b39de09bc330b79ac8cc2a73ed">onsetsds_memneeded</a> (int odftype, size_t fftsize, unsigned int medspan)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MainUserFuncs.html#gab23ae57d91a4ea14c4603243c84a7ed6">onsetsds_init</a> (<a class="el" href="structOnsetsDS.html">OnsetsDS</a> *ods, float *odsdata, int fftformat, int odftype, size_t fftsize, unsigned int medspan, float srate)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MainUserFuncs.html#gad1ec6c483b0462ec49ce5f64672cb48d">onsetsds_process</a> (<a class="el" href="structOnsetsDS.html">OnsetsDS</a> *ods, float *fftbuf)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gab23ae57d91a4ea14c4603243c84a7ed6"></a><!-- doxytag: member="onsetsds.h::onsetsds_init" ref="gab23ae57d91a4ea14c4603243c84a7ed6" args="(OnsetsDS *ods, float *odsdata, int fftformat, int odftype, size_t fftsize, unsigned int medspan, float srate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__MainUserFuncs.html#gab23ae57d91a4ea14c4603243c84a7ed6">onsetsds_init</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOnsetsDS.html">OnsetsDS</a> *&#160;</td>
          <td class="paramname"><em>ods</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>odsdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fftformat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>odftype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>fftsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>medspan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>srate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialise the <a class="el" href="structOnsetsDS.html" title="The main data structure for the onset detection routine.">OnsetsDS</a> struct and its associated memory, ready to detect onsets using the specified settings. Must be called before any call to <a class="el" href="group__MainUserFuncs.html#gad1ec6c483b0462ec49ce5f64672cb48d">onsetsds_process()</a>.</p>
<p>Note: you can change the onset detection function type in mid-operation by calling <a class="el" href="group__MainUserFuncs.html#gab23ae57d91a4ea14c4603243c84a7ed6">onsetsds_init()</a> again, but because memory will be reset this will behave as if starting from scratch (rather than being aware of the past few frames of sound). Do not attempt to change the onset detection function in a more hacky way (e.g. fiddling with the struct) because memory is set up differently for each of the different ODFs. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ods</td><td>An instance of the <a class="el" href="structOnsetsDS.html" title="The main data structure for the onset detection routine.">OnsetsDS</a> struct </td></tr>
    <tr><td class="paramname">odsdata</td><td>A pointer to the memory allocated, size given by <a class="el" href="group__MainUserFuncs.html#ga291a43b39de09bc330b79ac8cc2a73ed">onsetsds_memneeded()</a>. </td></tr>
    <tr><td class="paramname">fftformat</td><td>Which format of FFT data is to be expected, chosen from <a class="el" href="onsetsds_8h.html#aac4a978d7a67d6e681d666b4c2c10ff6">onsetsds_fft_types</a> </td></tr>
    <tr><td class="paramname">odftype</td><td>Which onset detection function (ODF) you'll be using, chosen from <a class="el" href="onsetsds_8h.html#a09065a442711dbed773c9cfdd7140103">onsetsds_odf_types</a> </td></tr>
    <tr><td class="paramname">fftsize</td><td>Size of FFT: 512 or 1024 is recommended. </td></tr>
    <tr><td class="paramname">medspan</td><td>The number of past frames that will be used for median calculation during triggering </td></tr>
    <tr><td class="paramname">srate</td><td>The sampling rate of the input audio </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga291a43b39de09bc330b79ac8cc2a73ed"></a><!-- doxytag: member="onsetsds.h::onsetsds_memneeded" ref="ga291a43b39de09bc330b79ac8cc2a73ed" args="(int odftype, size_t fftsize, unsigned int medspan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="group__MainUserFuncs.html#ga291a43b39de09bc330b79ac8cc2a73ed">onsetsds_memneeded</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>odftype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>fftsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>medspan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Determine how many bytes of memory must be allocated (e.g. using malloc) to accompany the <a class="el" href="structOnsetsDS.html" title="The main data structure for the onset detection routine.">OnsetsDS</a> struct, operating using the specified settings (used to store part-processed FFT data etc). The user must call this, and then allocate the memory, BEFORE calling <a class="el" href="group__MainUserFuncs.html#gab23ae57d91a4ea14c4603243c84a7ed6">onsetsds_init()</a>. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">odftype</td><td>Which onset detection function (ODF) you'll be using, chosen from <a class="el" href="onsetsds_8h.html#a09065a442711dbed773c9cfdd7140103">onsetsds_odf_types</a> </td></tr>
    <tr><td class="paramname">fftsize</td><td>Size of FFT: 512 is recommended. </td></tr>
    <tr><td class="paramname">medspan</td><td>The number of past frames that will be used for median calculation during triggering </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gad1ec6c483b0462ec49ce5f64672cb48d"></a><!-- doxytag: member="onsetsds.h::onsetsds_process" ref="gad1ec6c483b0462ec49ce5f64672cb48d" args="(OnsetsDS *ods, float *fftbuf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__MainUserFuncs.html#gad1ec6c483b0462ec49ce5f64672cb48d">onsetsds_process</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOnsetsDS.html">OnsetsDS</a> *&#160;</td>
          <td class="paramname"><em>ods</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>fftbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Process a single FFT data frame in the audio signal. Note that processing assumes that each call to <a class="el" href="group__MainUserFuncs.html#gad1ec6c483b0462ec49ce5f64672cb48d">onsetsds_process()</a> is on a subsequent frame in the same audio stream - to handle multiple streams you must use separate <a class="el" href="structOnsetsDS.html" title="The main data structure for the onset detection routine.">OnsetsDS</a> structs and memory!</p>
<p>This function's main purpose is to call some of the library's other functions, in the expected sequence. </p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 10 2014 21:13:15 for MusicRobot by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
